jQuery(function(t){if("undefined"==typeof wcsatt_cart_params)return!1;var a=t(document);a.on("change",".wcsatt-options-cart [name^=convert_to_sub]",function(){var a=t(this),e=t("div.cart_totals"),c=t("table.shop_table.cart"),s=a.closest(".wcsatt-options-cart"),o=c.closest(".woocommerce"),r=e.find("input.wcsatt-add-cart-to-subscription-action-input"),n=a.val(),i=c.find('input[name="_wp_http_referer"]').val();o.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var _={security:wcsatt_cart_params.update_cart_option_nonce,subscription_scheme:n,add_to_subscription_checked:r.is(":checked")?"yes":"no",action:"wcsatt_update_cart_option"};t.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",_.action),_,function(r){if("success"===r.result){var n=t(t.parseHTML(r.html)),_=n.find("div.cart_totals"),d=n.find("table.shop_table.cart");i&&d.find('input[name="_wp_http_referer"]').val(i),d.find('input[name="update_cart"]').prop("disabled",!0),e.replaceWith(_),c.replaceWith(d),o.trigger("wcsatt_updated_cart")}else window.alert(wcsatt_cart_params.i18n_update_cart_sub_error),r.reset_to_scheme&&(a.is(":radio")?s.find('input[value="'+r.reset_to_scheme+'"]').prop("checked",!0):a.val(r.reset_to_scheme));o.unblock()})}),a.on("change",".wcsatt-add-cart-to-subscription-action-input",function(){var a=t("div.cart_totals"),e=t(this),c=e.closest(".wcsatt-add-cart-to-subscription-wrapper"),s=c.find(".wcsatt-add-cart-to-subscription-options"),o=a.find(".wcsatt-options-cart [name^=convert_to_sub]");if(is_checked=e.is(":checked"),selected_scheme=o.val(),is_checked){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var r={subscription_scheme:selected_scheme,add_to_subscription_checked:e.is(":checked")?"yes":"no",action:"wcsatt_load_subscriptions_matching_cart"};t.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",r.action),r,function(t){"success"===t.result?(s.html(t.html),c.removeClass("closed"),c.addClass("open"),s.slideDown(200)):window.alert(wcsatt_cart_params.i18n_subs_load_error),c.unblock()})}else c.removeClass("open"),c.addClass("closed"),s.slideUp(200)})});